# 142.环形链表II

力扣链接：https://leetcode.cn/problems/linked-list-cycle-ii/

---

一直有记得这道题的大致思路，但每次都是现推，这遍做完感觉都直接记住了，但是这次时间有点长

---

**思路：**

双指针快慢指针

1. while遍历，快指针一次走俩，慢指针一次走一，注意条件是 快不为空 且 快的下一也不为空   
2. 若相等，有环，若无相等，则无环   
   // 慢指针走的长度s，×2就是快指针的长度
   // 快 - 慢 = 环的长度 = 2s - s = s
   // 设进环时走了 x，起点到相遇为 y
   // 慢：y+x=s, 快：y+x+?+x=2s, => ?=y
   // 从相遇位置开始，另设一个指针从头开始，再次相遇就是起点

---

## 代码

```cpp
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */
class Solution {
public:
    ListNode* detectCycle(ListNode* head) {
        ListNode* fast = head;
        ListNode* slow = head;

        while (fast != NULL && fast->next != NULL) { // 注意条件设置！
            fast = fast->next->next;
            slow = slow->next;
            // 慢指针走的长度s，×2就是快指针的长度
            // 快 - 慢 = 环的长度 = 2s - s = s
            // 设进环时走了 x，起点到相遇为 y
            // 慢：x+y, 快：x+环长+y, x+y=s
            // 从此相遇位置开始，另一个从头开始，再次相遇就是起点

            if (fast == slow) {
                ListNode* cur = head;
                while (cur != slow) {
                    cur = cur->next;
                    slow = slow->next;
                }
                return cur;
            }
        }

        return NULL;
    }
};
```
